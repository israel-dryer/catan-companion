import{a as $}from"./chunk-LQVFMVUB.js";import{a as D}from"./chunk-OI36OCLG.js";import{Da as k,Db as Q,Fa as S,Fb as z,Gb as Y,Hb as q,K as m,Mb as J,Na as A,R as g,T as v,U as f,V as R,W as M,X as P,Y as n,Z as i,_ as u,c as E,ea as b,f as h,la as F,ma as r,mb as j,na as s,qa as y,rb as G,sa as w,sb as T,ta as I,ua as C,ub as H,vb as L,wb as O,x,xb as N,y as _}from"./chunk-PV5YSWZ3.js";import"./chunk-WUWNYIGP.js";import"./chunk-LWVDKAUF.js";import"./chunk-GL44O5XQ.js";import"./chunk-RJAJR2VM.js";import"./chunk-F7XBNY6P.js";import"./chunk-VMJYD4Q3.js";import"./chunk-ECOWT7JY.js";import"./chunk-V7Y3NHWF.js";import"./chunk-4U6PRYVA.js";import"./chunk-ZAB4NJP7.js";import"./chunk-JWIEPCRG.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import"./chunk-HCV7W5KS.js";var W=e=>({height:e});function X(e,t){if(e&1&&(n(0,"div",2),u(1,"div",3),n(2,"ion-text",4),r(3),i(),n(4,"div",5),r(5),i()()),e&2){let l=t.$implicit,a=t.$index,o=b();m(),v("ngStyle",w(3,W,o.highestRoll===0?0:(l/o.highestRoll*100).toString()+"%")),m(2),s(l),m(2),s(a+2)}}function Z(e,t){e&1&&M(0,X,6,5,"div",2,R),e&2&&P(t.rolls)}var U=(()=>{let t=class t{constructor(){this.gameService=x($)}ngOnInit(){this.$chartData=E(D(()=>this.gameService.selectGame(this.gameId))).pipe(h(a=>{if(a){let o=0,p=Array.from({length:11},()=>0);return a.rolls.forEach(c=>{let d=c.total-2;p[d]+=1}),o=Math.max(...p),{highestRoll:o,rolls:p}}else return{highestRoll:0,rolls:[]}}))}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=_({type:t,selectors:[["app-report-histogram"]],inputs:{gameId:"gameId"},standalone:!0,features:[y],decls:4,vars:3,consts:[[1,"chart-container"],[2,"height","100%"],[1,"chart-bar"],[1,"bar-line",3,"ngStyle"],["color","primary",1,"bar-value"],[1,"bar-label"]],template:function(o,p){if(o&1&&(n(0,"div",0),u(1,"div",1),g(2,Z,2,0),I(3,"async"),i()),o&2){let c;m(2),f((c=C(3,1,p.$chartData))?2:-1,c)}},dependencies:[z,k,S],styles:["[_nghost-%COMP%]{box-sizing:border-box;display:flex;flex-direction:column;height:calc(100% - 56px)}@keyframes _ngcontent-%COMP%_grow{0%{height:0}25%{height:25%}50%{height:50%}75%{height:75%}to{height:100%}}.chart-container[_ngcontent-%COMP%]{height:100%;margin-top:1rem;display:flex;align-items:flex-end;gap:3px}.chart-bar[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-end;align-items:center;height:100%;width:100%;animation-name:_ngcontent-%COMP%_grow;animation-duration:.2s}.chart-bar[_ngcontent-%COMP%]:hover   .bar-line[_ngcontent-%COMP%]{background-color:var(--ion-color-secondary)}.bar-line[_ngcontent-%COMP%]{background-color:var(--ion-color-primary);border-radius:4px 4px 0 0;width:100%}.bar-label[_ngcontent-%COMP%]{text-align:center;margin-top:.5rem}.bar-value[_ngcontent-%COMP%]{position:absolute;transform:translateY(-2.25rem);color:var(--ion-color-light);font-weight:700}"]});let e=t;return e})();function ee(e,t){if(e&1&&(n(0,"ion-item")(1,"ion-label"),r(2),i(),n(3,"ion-label",0),r(4),i(),n(5,"ion-label"),r(6),i(),n(7,"ion-label"),r(8),i(),n(9,"ion-label"),r(10),i(),n(11,"ion-label"),r(12),i()()),e&2){let l=t.$implicit;m(2),s(l.roll),m(2),s(l.total),m(2),s(l.dice1),m(2),s(l.dice2),m(2),s(l==null?null:l.action),m(2),s(l.player)}}function te(e,t){e&1&&(n(0,"ion-list")(1,"ion-item")(2,"ion-label")(3,"strong"),r(4,"#"),i()(),n(5,"ion-label",0)(6,"strong"),r(7,"Total"),i()(),n(8,"ion-label")(9,"strong"),r(10,"D1"),i()(),n(11,"ion-label")(12,"strong"),r(13,"D2"),i()(),n(14,"ion-label")(15,"strong"),r(16,"Action"),i()(),n(17,"ion-label")(18,"strong"),r(19,"Player"),i()()(),n(20,"ion-content",1),M(21,ee,13,6,"ion-item",null,R),i()()),e&2&&(m(21),P(t))}var V=(()=>{let t=class t{constructor(){this.gameService=x($),this.$rolls=E(D(()=>this.gameService.selectGame(this.gameId))).pipe(h(a=>{var c;let o=(c=a==null?void 0:a.rolls)!=null?c:[],p=[];return o.forEach((d,B,re)=>{p.push({roll:B+1,total:d.total,dice1:d.dice1,dice2:d.dice2,action:d.action,player:d.player})}),p.sort((d,B)=>B.roll-d.roll),p}))}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=_({type:t,selectors:[["app-report-rolls"]],inputs:{gameId:"gameId"},standalone:!0,features:[y],decls:2,vars:3,consts:[["color","success"],[2,"height","calc(100vh - 200px)"]],template:function(o,p){if(o&1&&(g(0,te,23,0,"ion-list"),I(1,"async")),o&2){let c;f((c=C(1,1,p.$rolls))?0:-1,c)}},dependencies:[S,T,N,L,O]});let e=t;return e})();function ne(e,t){if(e&1&&u(0,"app-report-histogram",6),e&2){let l=b();v("gameId",l)}}function ie(e,t){if(e&1&&u(0,"app-report-rolls",6),e&2){let l=b();v("gameId",l)}}function oe(e,t){if(e&1&&g(0,ne,1,1,"app-report-histogram",6)(1,ie,1,1,"app-report-rolls",6),e&2){let l;b();let a=F(8);f((l=a.value)==="chart"?0:l==="rolls"?1:-1)}}var $e=(()=>{let t=class t{constructor(){this.route=x(A)}ngOnInit(){this.$gameId=this.route.paramMap.pipe(h(a=>Number(a.get("id"))))}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=_({type:t,selectors:[["app-reports"]],standalone:!0,features:[y],decls:17,vars:4,consts:[["reportSegment",""],[3,"translucent"],["slot","start"],[1,"ion-padding"],["value","chart"],["value","rolls"],[3,"gameId"]],template:function(o,p){if(o&1&&(n(0,"ion-header",1)(1,"ion-toolbar")(2,"ion-buttons",2),u(3,"ion-back-button"),i(),n(4,"ion-title"),r(5,"Reports"),i()()(),n(6,"ion-content",3)(7,"ion-segment",4,0)(9,"ion-segment-button",4)(10,"ion-label"),r(11,"Chart"),i()(),n(12,"ion-segment-button",5)(13,"ion-label"),r(14,"Rolls"),i()()(),g(15,oe,2,1),I(16,"async"),i()),o&2){let c;v("translucent",!0),m(15),f((c=C(16,2,p.$gameId))?15:-1,c)}},dependencies:[H,q,Y,T,J,Q,O,G,j,U,V,S]});let e=t;return e})();export{$e as ReportsPage};
