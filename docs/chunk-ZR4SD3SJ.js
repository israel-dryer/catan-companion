import{a as te}from"./chunk-FNEONL4B.js";import"./chunk-GIDP7GDQ.js";import"./chunk-RW7D7ZYR.js";import"./chunk-Z3GWI56J.js";import"./chunk-F43FBNYM.js";import"./chunk-QTVGTTQH.js";import"./chunk-TVLZZ6SX.js";import"./chunk-3DFML6UE.js";import"./chunk-HC6MZPB3.js";import"./chunk-YMI2B6JE.js";import"./chunk-BJUAS447.js";import"./chunk-FERD25SW.js";import"./chunk-5SST7FTL.js";import"./chunk-2UWZ4B5Y.js";import"./chunk-W2I4VDZA.js";import"./chunk-MCRJI3T3.js";import{a as ee}from"./chunk-YMJFXFHQ.js";import"./chunk-4HHYV5DL.js";import"./chunk-LQVFMVUB.js";import{a as Z}from"./chunk-OI36OCLG.js";import"./chunk-OGSRTT4J.js";import"./chunk-4QQZBZ4S.js";import"./chunk-MEPF3XFJ.js";import"./chunk-MM5QLNJM.js";import"./chunk-72KDLSWN.js";import"./chunk-5OMUW5VI.js";import"./chunk-OBXDPQ3V.js";import{Ab as H,Bb as U,C as y,Cb as j,D as S,Eb as Q,Fa as B,Gb as q,Hb as z,K as d,Kb as J,Lb as W,Nb as X,Ob as Y,R as f,T as m,U as P,V as I,W as C,X as b,Y as t,Z as n,_,ca as w,da as p,ea as g,ma as l,mb as K,na as x,ob as O,qa as T,qb as F,ra as k,rb as G,sb as V,ta as A,tb as D,ua as R,ub as M,vb as $,wb as L,x as v,y as E,yb as N}from"./chunk-PV5YSWZ3.js";import"./chunk-WUWNYIGP.js";import"./chunk-LWVDKAUF.js";import"./chunk-GL44O5XQ.js";import"./chunk-RJAJR2VM.js";import"./chunk-F7XBNY6P.js";import"./chunk-VMJYD4Q3.js";import"./chunk-ECOWT7JY.js";import"./chunk-V7Y3NHWF.js";import"./chunk-4U6PRYVA.js";import"./chunk-ZAB4NJP7.js";import"./chunk-JWIEPCRG.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import{h}from"./chunk-HCV7W5KS.js";var ie=()=>["SUBMIT"];function ne(a,r){a&1&&(t(0,"ion-list-header")(1,"ion-label",11),l(2,"Selected players"),n()())}function ae(a,r){if(a&1&&(t(0,"ion-select-option",12),l(1),n()),a&2){let s=r.$implicit;m("value",s.name),d(),x(s.name)}}function re(a,r){a&1&&C(0,ae,2,2,"ion-select-option",12,I),a&2&&b(r)}function oe(a,r){if(a&1&&(t(0,"ion-item")(1,"ion-label"),l(2),n(),_(3,"ion-reorder",1),n()),a&2){let s=r.$implicit;d(2),x(s)}}function le(a,r){if(a&1){let s=w();t(0,"div")(1,"ion-list-header")(2,"ion-label",11),l(3,"Turn Order"),n()(),t(4,"ion-reorder-group",13),p("ionItemReorder",function(o){y(s);let i=g();return S(i.handlePlayerReorder(o))}),C(5,oe,4,1,"ion-item",null,I),n()(),t(7,"div")(8,"ion-list-header")(9,"ion-label",11),l(10,"Starting player strategy"),n()(),t(11,"ion-item")(12,"ion-radio-group",14),p("ionChange",function(o){y(s);let i=g();return S(i.startingOptionChanged(o))}),t(13,"ion-radio",15),l(14,"Use Random Player"),n(),t(15,"ion-radio",16),l(16,"First in List"),n()()()(),t(17,"ion-list-header")(18,"ion-label",11),l(19,"Expansion Packs"),n()(),t(20,"ion-item")(21,"ion-toggle",17),p("ionChange",function(o){y(s);let i=g();return S(i.toggleCitiesAndKnights(o))}),t(22,"ion-label"),l(23,"Cities and Knights Expansion"),n()()()}if(a&2){let s=g();d(4),m("disabled",!1),d(),b(s.roster),d(7),m("value",s.startingOption),d(9),m("checked",s.citiesAndKnights)}}var ye=(()=>{let r=class r{constructor(){this.roster=[],this.startingOption="random",this.citiesAndKnights=!1,this.playerService=v(ee),this.playService=v(te),this.$players=Z(()=>this.playerService.selectPlayers().then(e=>e.sort((o,i)=>i.lastPlayed-o.lastPlayed))),this.createPlayerInputs=[{placeholder:"Enter a username",name:"name",value:""}],this.startingOptionChanged=e=>{this.startingOption=e.detail.value},this.startGame=()=>h(this,null,function*(){this.roster.toReversed().forEach(i=>this.playerService.updatePlayer(i));let e=0;this.startingOption==="random"&&(e=Math.floor(Math.random()*this.roster.length));let o={id:Date.now(),roster:this.roster,rolls:[],turnIndex:e,citiesAndKnights:this.citiesAndKnights};return this.playService.startGame(o)}),this.toggleCitiesAndKnights=({detail:e})=>{this.citiesAndKnights=e.checked}}addPlayer(o){return h(this,arguments,function*({detail:e}){var c,u;if(!((c=e.data)!=null&&c.values))return;let i=(u=e.data.values)==null?void 0:u.name;i&&(yield this.playerService.insertPlayer(i)),this.createPlayerInputs=[{placeholder:"Enter a player",name:"name",value:""}]})}selectAvailablePlayers(e){return h(this,null,function*(){this.roster=e.detail.value})}handlePlayerReorder(e){return h(this,null,function*(){this.roster.splice(e.detail.to,0,this.roster.splice(e.detail.from,1)[0]),e.detail.complete()})}};r.\u0275fac=function(o){return new(o||r)},r.\u0275cmp=E({type:r,selectors:[["app-select-players"]],standalone:!0,features:[T],decls:24,vars:10,consts:[[3,"translucent"],["slot","end"],["icon","close","default-href","/"],[1,"ion-padding"],["labelPlacement","stacked","placeholder","Select players","aria-label","Available Players","multiple","",3,"ionChange"],[1,"ion-padding",2,"display","flex"],["color","warning","expand","block","fill","clear","id","present-alert",2,"width","100%"],["slot","start","name","person-add"],["color","warning","expand","block",2,"width","100%",3,"click","disabled"],["slot","start","name","dice"],["trigger","present-alert","header","New Player",3,"didDismiss","buttons","inputs"],["color","medium"],[3,"value"],[3,"ionItemReorder","disabled"],[2,"width","100%","padding",".5rem",3,"ionChange","value"],["color","warning","value","random"],["color","warning","value","first"],["color","warning",3,"ionChange","checked"]],template:function(o,i){if(o&1&&(t(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),_(3,"ion-back-button",2),n(),t(4,"ion-title"),l(5,"Create Game"),n()()(),t(6,"ion-content",3)(7,"div"),f(8,ne,3,0,"ion-list-header"),t(9,"ion-item")(10,"ion-select",4),p("ionChange",function(u){return i.selectAvailablePlayers(u)}),f(11,re,2,0),A(12,"async"),n()()(),f(13,le,24,3),n(),t(14,"ion-footer",5)(15,"ion-button",6),_(16,"ion-icon",7),t(17,"ion-label"),l(18,"New Player"),n()(),t(19,"ion-button",8),p("click",function(){return i.startGame()}),_(20,"ion-icon",9),t(21,"ion-label"),l(22,"Start Game"),n()()(),t(23,"ion-alert",10),p("didDismiss",function(u){return i.addPlayer(u)}),n()),o&2){let c;m("translucent",!0),d(8),P(i.roster.length>0?8:-1),d(3),P((c=R(12,7,i.$players))?11:-1,c),d(2),P(i.roster.length?13:-1),d(6),m("disabled",i.roster.length===0),d(4),m("buttons",k(9,ie))("inputs",i.createPlayerInputs)}},dependencies:[M,z,G,K,q,V,N,L,$,X,B,Q,W,H,j,U,D,F,J,O,Y]});let a=r;return a})();export{ye as SelectPlayersPage};
