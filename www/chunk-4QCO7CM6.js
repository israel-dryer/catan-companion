import{b as a}from"./chunk-OGSRTT4J.js";import{h as n}from"./chunk-HCV7W5KS.js";var u=class extends a{constructor(){super(),this.speechSynthesis=null,"speechSynthesis"in window&&(this.speechSynthesis=window.speechSynthesis,window.addEventListener("beforeunload",()=>{this.stop()}))}speak(t){return n(this,null,function*(){this.speechSynthesis||this.throwUnsupportedError(),yield this.stop();let o=this.speechSynthesis,e=this.createSpeechSynthesisUtterance(t);return new Promise((i,r)=>{e.onend=()=>{i()},e.onerror=s=>{r(s)},o.speak(e)})})}stop(){return n(this,null,function*(){this.speechSynthesis||this.throwUnsupportedError(),this.speechSynthesis.cancel()})}getSupportedLanguages(){return n(this,null,function*(){return{languages:this.getSpeechSynthesisVoices().map(i=>i.lang).filter((i,r,s)=>s.indexOf(i)==r)}})}getSupportedVoices(){return n(this,null,function*(){return{voices:this.getSpeechSynthesisVoices()}})}isLanguageSupported(t){return n(this,null,function*(){return{supported:(yield this.getSupportedLanguages()).languages.includes(t.lang)}})}openInstall(){return n(this,null,function*(){this.throwUnimplementedError()})}createSpeechSynthesisUtterance(t){let o=this.getSpeechSynthesisVoices(),e=new SpeechSynthesisUtterance,{text:i,lang:r,rate:s,pitch:h,volume:c,voice:p}=t;return p&&(e.voice=o[p]),c&&(e.volume=c>=0&&c<=1?c:1),s&&(e.rate=s>=.1&&s<=10?s:1),h&&(e.pitch=h>=0&&h<=2?h:2),r&&(e.lang=r),e.text=i,e}getSpeechSynthesisVoices(){return this.speechSynthesis||this.throwUnsupportedError(),(!this.supportedVoices||this.supportedVoices.length<1)&&(this.supportedVoices=this.speechSynthesis.getVoices()),this.supportedVoices}throwUnsupportedError(){throw this.unavailable("SpeechSynthesis API not available in this browser.")}throwUnimplementedError(){throw this.unimplemented("Not implemented on web.")}};export{u as TextToSpeechWeb};
